In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:623:19: error: no type named 'ExternalAsciiStringResource' in 'v8::String'; did you mean 'ExternalStringResource'?
      v8::String::ExternalAsciiStringResource *resource) {
      ~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~
                  ExternalStringResource
/Users/dc11/.node-gyp/iojs-1.6.2/deps/v8/include/v8.h:2017:19: note: 'ExternalStringResource' declared here
  class V8_EXPORT ExternalStringResource
                  ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:622:36: error: redefinition of 'NanNew'
  NAN_INLINE v8::Local<v8::String> NanNew(
                                   ^
../../nan/nan.h:617:36: note: previous definition is here
  NAN_INLINE v8::Local<v8::String> NanNew(
                                   ^
../../nan/nan.h:1993:12: error: no member named 'IsExternalAscii' in 'v8::String'; did you mean 'IsExternal'?
  if (str->IsExternalAscii()) {
           ^~~~~~~~~~~~~~~
           IsExternal
/Users/dc11/.node-gyp/iojs-1.6.2/deps/v8/include/v8.h:1981:8: note: 'IsExternal' declared here
  bool IsExternal() const;
       ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:1994:23: error: no type named 'ExternalAsciiStringResource' in 'v8::String'; did you mean 'ExternalStringResource'?
    const v8::String::ExternalAsciiStringResource* ext;
          ~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~
                      ExternalStringResource
/Users/dc11/.node-gyp/iojs-1.6.2/deps/v8/include/v8.h:2017:19: note: 'ExternalStringResource' declared here
  class V8_EXPORT ExternalStringResource
                  ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:1995:16: error: no member named 'GetExternalAsciiStringResource' in 'v8::String'
    ext = str->GetExternalAsciiStringResource();
          ~~~  ^
../../nan/nan.h:1996:11: error: assigning to 'const char *' from incompatible type 'const uint16_t *' (aka 'const unsigned short *')
    *data = ext->data();
          ^ ~~~~~~~~~~~
../ext/bson.cc:229:53: error: no matching member function for call to 'Get'
                        const Local<String>& constructorString = object->Get(bson->_bsontypeString)->ToString();
                                                                 ~~~~~~~~^~~
/Users/dc11/.node-gyp/iojs-1.6.2/deps/v8/include/v8.h:2428:16: note: candidate function not viable: no known conversion from 'Persistent<v8::String>' to 'Handle<v8::Value>' for 1st argument
  Local<Value> Get(Handle<Value> key);
               ^
/Users/dc11/.node-gyp/iojs-1.6.2/deps/v8/include/v8.h:2430:16: note: candidate function not viable: no known conversion from 'Persistent<v8::String>' to 'uint32_t' (aka 'unsigned int') for 1st argument
  Local<Value> Get(uint32_t index);
               ^
../ext/bson.cc:154:15: error: calling a private constructor of class 'v8::Local<v8::Value>'
        Local<Value> value = *constValue;
                     ^
../ext/bson.cc:123:4: note: in instantiation of member function 'BSONSerializer<CountStream>::SerializeValue' requested here
                        SerializeValue(typeLocation, propertyValue);
                        ^
../ext/bson.cc:898:11: note: in instantiation of member function 'BSONSerializer<CountStream>::SerializeDocument' requested here
                counter.SerializeDocument(object);
                        ^
/Users/dc11/.node-gyp/iojs-1.6.2/deps/v8/include/v8.h:409:32: note: declared private here
  template <class S> V8_INLINE Local(S* that) : Handle<T>(that) { }
                               ^
../ext/bson.cc:229:25: error: declaration of reference variable 'constructorString' requires an initializer
                        const Local<String>& constructorString = object->Get(bson->_bsontypeString)->ToString();
                                             ^~~~~~~~~~~~~~~~~
../ext/bson.cc:154:15: error: calling a private constructor of class 'v8::Local<v8::Value>'
        Local<Value> value = *constValue;
                     ^
/Users/dc11/.node-gyp/iojs-1.6.2/deps/v8/include/v8.h:409:32: note: declared private here
  template <class S> V8_INLINE Local(S* that) : Handle<T>(that) { }
                               ^
../ext/bson.cc:154:15: error: calling a private constructor of class 'v8::Local<v8::Value>'
        Local<Value> value = *constValue;
                     ^
../ext/bson.cc:123:4: note: in instantiation of member function 'BSONSerializer<DataStream>::SerializeValue' requested here
                        SerializeValue(typeLocation, propertyValue);
                        ^
../ext/bson.cc:908:8: note: in instantiation of member function 'BSONSerializer<DataStream>::SerializeDocument' requested here
                data.SerializeDocument(object);
                     ^
/Users/dc11/.node-gyp/iojs-1.6.2/deps/v8/include/v8.h:409:32: note: declared private here
  template <class S> V8_INLINE Local(S* that) : Handle<T>(that) { }
                               ^
../ext/bson.cc:229:25: error: declaration of reference variable 'constructorString' requires an initializer
                        const Local<String>& constructorString = object->Get(bson->_bsontypeString)->ToString();
                                             ^~~~~~~~~~~~~~~~~
../ext/bson.cc:154:15: error: calling a private constructor of class 'v8::Local<v8::Value>'
        Local<Value> value = *constValue;
                     ^
/Users/dc11/.node-gyp/iojs-1.6.2/deps/v8/include/v8.h:409:32: note: declared private here
  template <class S> V8_INLINE Local(S* that) : Handle<T>(that) { }
                               ^
13 errors generated.
make: *** [Release/obj.target/bson/ext/bson.o] Error 1
gyp ERR! build error 
gyp ERR! stack Error: `make` failed with exit code: 2
gyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:276:23)
gyp ERR! stack     at emitTwo (events.js:87:13)
gyp ERR! stack     at ChildProcess.emit (events.js:169:7)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (child_process.js:1044:12)
gyp ERR! System Darwin 15.3.0
gyp ERR! command "/usr/local/bin/iojs" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /Users/dc11/MIT/Senior_2/6.857/back/node_modules/bson
gyp ERR! node -v v1.6.2
gyp ERR! node-gyp -v v3.3.1
gyp ERR! not ok 
